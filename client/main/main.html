<head>
    <title>Hourglass</title>
    <link rel="icon" href="favicon.ico?v=2">
</head>

<template name="main">
    {{> loginButtons}}
    <header style="background-color:{{divColor 'header'}}">
        <div id="aboveBar">
            <i class="fa fa-bars" aria-hidden="true" style="color:{{iconColor 'menu'}}"></i>
            <h1>Hourglass</h1><h2>{{schoolName}}</h2>
            <i class="fa fa-cog" aria-hidden="true" style="color:{{iconColor 'options'}}"></i>
            <div id="logout" onclick='document.getElementById("login-buttons-logout").click();'>Logout</div>
        </div>
        <div id="loadBar">
            <div id="progress" style="background-color:{{loadType}};width:{{loadPercent}}"></div>
        </div>
    </header>
    <div id="menuContainer" style="margin-left:{{menuStatus}};background-color:{{divColor 'sidebar'}}">
        <div class="mode classes">
            <i class="fa fa-university" aria-hidden="true"></i>
            <h4 style="color:{{modeStatus 'classes'}}">Classes</h4>
        </div>
        <div class="mode calendar">
            <i class="fa fa-calendar" aria-hidden="true"></i>
            <h4 style="color:{{modeStatus 'calendar'}}">Calendar</h4>
        </div>
        <div id="functions">
            <div class="function manageClass" onclick="window.location='/profile'">
                <i class="fa fa-tasks" aria-hidden="true"></i>
                <h4>Manage Classes</h4>
            </div>
        </div>
        <div id="classListHolder">
        <h3>Enrolled</h3><h3 id="calCreWork">{{calCreWork}}</h3>
            {{#each myClasses}}
                {{> sidebarClasses}}  
            {{/each}}
        </div>
    </div>
    <div id="optionsContainer" style="margin-right:{{optionsStatus}};background-color:{{divColor 'sidebar'}}">
    </div>
    <img id="bg" src={{bgSrc}}>
    <div id="mainBody">
        {{#if currMode 'classes'}}
            <div id="classesMode">
                {{#each myClasses}}
                    {{> classesMode}}
                {{/each}}
            </div>
        {{/if}}

        {{#if currMode 'calendar'}}
        <div id="calbg" style="{{calbg}}"></div>
            <div id="calendar" style="{{calCenter}}">
                {{> fullcalendar calendarOptions}}
            </div>
        {{/if}}
    </div>
    <div class="overlay">
        <div id="editWork">
            <div id="editWorkCont" style="{{workCenter}};background-color:{{divColor 'header'}}">
                <div id="workTypeBar" style="background-color:{{workType}}"></div>
                <div id="workInfoContainer">
                    <div>
                        <span class="change req" id="workName">{{work 'name'}}</span>
                    </div>
                    <div id="workInfoNmCont">
                        <div>
                            <span class="workTitle">Due Date:</span>
                            <span class="change req" re="readonly" id="workDate">{{work 'dueDate'}}</span>
                        </div>
                        <div>
                            <span class="workTitle">Description:</span><br>
                            <span class="change req" type="textarea" id="workDesc">{{work 'description'}}</span>
                        </div>
                        <div>
                            <div  class="inputRadio">
                            <span class="workTitle">Type:</span>
                            <span class="change radio req" opc="0" op="0" re="readonly" id="workType">{{work 'type'}}</span>
                            </div>
                            <div class="workOptions type" style="background-color:{{divColor 'header'}}">
                                <p class="workOptionText">Normal</p>
                                <p class="workOptionText">Quiz</p>
                                <p class="workOptionText">Test</p>
                                <p class="workOptionText">Project</p>
                                <p class="workOptionText">Other</p>
                            </div>
                        </div>
                        <div id="workAttach">Attach other files</div>
                        <div id="workAttachmentHolder">
                            {{#each work 'attachments'}}
                                <a href={{link}}>{{filename}}</a>
                            {{/each}}
                        </div>
                        {{#unless newWork}}
                            <div id="workComments">
                                <div>
                                    <h3>Comments</h3>
                                    <textarea id="workComment" rows="4" cols="50"></textarea>
                                </div>
                                <div id="comment">
                                    {{#each work 'comments'}}
                                        {{> comment}}
                                    {{/each}}
                                </div>
                            </div>
                        {{/unless}}
                    </div>
                </div>
                {{#if newWork}}
                    {{#if inRole}}
                        <div id="workSubmit">Save</div>
                    {{/if}}
                {{/if}}
            </div>
        </div>
    </div>
</template>

<template name="sidebarClasses">
    <div class="sideClass" classid="{{_id}}">
        <p class="sideClassName">{{name}}</p>
        <p class="sideClassHour">{{hour}}</p>
    </div>
</template>

<template name="classesMode">
    <div class="mainClass" style="background-color:{{divColor 'header'}}">
        <div class="classInfo"> <!-- class color -->
            <h3 class="mainClassName">{{name}}</h3>
            <p class="mainClassHour">{{hour}}</p>
            <p class="mainClassTeacher">{{teacher}}</p>
        </div>
        <div class="creWork" classid="{{_id}}">
            <i class="fa fa-plus" aria-hidden="true"></i>
            <h4>Add Work</h4>
        </div>
        <div class="workHolder">
        {{#each thisClassWork}}
            {{> classModeWork}}
        {{/each}}
        </div>
    </div>
</template>

<template name="classModeWork">
    <div class="workCard" workid="{{_id}}">
        <div class="cWorkType" style="background-color:{{typeColor}}"></div>
        <div class="cWorkCont">
            <p class="cWorkName">{{name}}</p>
            <span class="cWorkDate">{{dueDate}}</span>
        </div>
    </div>
</template>